---
import { Icon } from "astro-icon/components";
import { getShowcase } from "@db/projects";
import ShowCaseCarousel from "@components/svelte/ShowCaseCarousel.svelte";
import PageLayout from "@layouts/PageLayout.astro";

const projects = await getShowcase();
---

<PageLayout title="Portfolio de Thomas Gysemans - Vitrine de mes projets principaux">
    <div class="relative">
        <div class="absolute z-20 top-0 left-O w-full h-dvh custom-bg pointer-events-none" />
        <nav class="absolute z-30 top-20 left-[50%] -translate-x-[50%] w-full">
            <p class="absolute top-[30%] left-8 text-white text-base lg:text-lg flex items-center space-x-4 border-2 border-yellow-500">
                <Icon name="chevron-left" />
                <a href="/" class="hover:underline">Quitter</a>
            </p>
            <h1 class="text-white text-center text-xl lg:text-3xl border-2 border-green-500">Vitrine de mes<br/>meilleurs projets</h1>
            <p class="absolute top-[30%] right-8 text-white text-base lg:text-lg flex items-center justify-end space-x-4 border-2 border-red-500">
                <a href="/projects" class="hover:underline">Tous mes projets</a>
                <Icon name="chevron-right" />
            </p>
        </nav>
        <ShowCaseCarousel client:idle numberOfProjects={projects.length}>
            {projects.map((project, i) => (
                <div class="cell" role="tabpanel" aria-roledescription="diapositive" aria-label={`${i + 1} sur ${projects.length}`}>
                    <div class="px-4 w-full h-full py-16 space-y-4">
                        <h2 class="text-2xl text-center w-full">{project.name}</h2>
                        <div class="cell-details flex flex-col items-center space-y-4">
                            <p class="text-sm w-full inline-block">{project.showcaseDescription || project.description}</p>
                            <a type="button" class="carousel-btn" href={`/projects/${project.slug}`}>
                                En savoir plus
                            </a>
                        </div>
                    </div>
                </div>
            ))}
        </ShowCaseCarousel>
        <div class="absolute bottom-16 left-[50%] -translate-x-[50%] z-30">
            <a href="/projects" class="carousel-btn">Voir tous mes projets</a>
        </div>
    </div>
</PageLayout>

<style lang="scss">
    .cell-details {
        transition: opacity 200ms ease;
    }

    .custom-bg {
        background: radial-gradient(circle, rgba(#000,0) 0%, rgba(#000,.6) 99%, rgba(#000,0) 100%);
    }
</style>
