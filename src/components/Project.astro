---
import { getProjectNature, getProjectNatureIcon } from "@lib/ProjectNature";
import { Icon } from "astro-icon/components";
import { ProjectType } from "../lib/ProjectType";
import Technology from "./Technology.astro";

interface Props {
    project: Project;
}

const { project } = Astro.props;
const projectType = ProjectType.getProjectType(project.type);
---

<div class="bg-white rounded-md border-2 border-primary/50" data-slug={project.slug}>
    <div class="w-full h-60 *:rounded-[4px_4px_0_0]">
        <img src={project.pictures[project.presentation_picture]} alt=`PrÃ©sentation du projet ${project.name}` class="h-full w-full" />
    </div>
    <div class="py-4 px-6 space-y-6 h-[60%]">
        <strong class="inline-flex items-center space-x-4">
            <a href=`/projects/${project.slug}` class="underline text-primary text-2xl font-bold max-w-[80%] truncate">{project.name}</a>
            <Icon name={projectType.icon} class="text-2xl" title={projectType.frenchName} />
        </strong>
        <p class="text-primary text-sm leading-8 font-light">{project.summary}</p>
        <div class="flex flex-wrap *:mb-4 *:mr-4">
            {project.technologies.map(techno => (
                <Technology logo={techno.logo} name={techno.name} />
            ))}
        </div>
        <div class="flex justify-between">
            <span class="text-primary/50 flex items-center space-x-2 text-sm">
                <Icon name=`${project.team_members === 1 ? "circle-user-round" : "users"}` />
                <span class="relative top-[1px]">{project.team_members === 1 ? "Solo" : project.team_members}</span>
            </span>
            <span class="text-primary/50 flex items-center space-x-2 text-sm">
                <Icon name=`${getProjectNatureIcon(project.nature)}` />
                <span class="relative top-[1px]">{getProjectNature(project.nature)}</span>
            </span>
            <span class="text-primary/50 flex items-center space-x-2 text-sm">
                <Icon name="calendar" />
                <span class="relative top-[1px]">{project.date}</span>
            </span>
        </div>
    </div>
</div>